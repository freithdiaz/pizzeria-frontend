name: Ping Render backend to avoid cold starts

on:
  schedule:
    # every 10 minutes (UTC)
    - cron: '*/10 * * * *'
  workflow_dispatch:

env:
  # Default backend URL; you can override this with a repository secret
  BACKEND_URL: https://pizzeria-w9k6.onrender.com/

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping backend root (no-fail)
        run: |
          echo "Pinging $BACKEND_URL to avoid Render cold starts"
          # Retry a few times but don't fail the workflow if the site is down
          curl -fsS --retry 3 "$BACKEND_URL" || true
